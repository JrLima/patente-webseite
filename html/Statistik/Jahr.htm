<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>
    Data from Xml File Example - HTML5 jQuery Chart Plugin by jqChart
</title>
    <link rel="stylesheet" type="text/css" href="css/jquery.jqChart.css" />
    <link rel="stylesheet" type="text/css" href="css/jquery.jqRangeSlider.css" />
    <link rel="stylesheet" type="text/css" href="themes/smoothness/jquery-ui-1.10.4.css" />
    <script src="js/jquery-1.11.1.min.js" type="text/javascript"></script>
    <script src="js/jquery.mousewheel.js" type="text/javascript"></script>
    <script src="js/jquery.jqChart.min.js" type="text/javascript"></script>
    <script src="js/jquery.jqRangeSlider.min.js" type="text/javascript"></script>
    <!--[if IE]><script lang="javascript" type="text/javascript" src="js/excanvas.js"></script><![endif]-->
    
    <script lang="javascript" type="text/javascript">
	

        var background = {
            type: 'linearGradient',
            x0: 0,
            y0: 0,
            x1: 0,
            y1: 1,
            colorStops: [{ offset: 0, color: '#d2e6c9' },
                         { offset: 1, color: 'white' }]
        };

        var fillStyle = {
            type: 'linearGradient',
            x0: 0,
            y0: 0,
            x1: 1,
            y1: 0,
            colorStops: [{ offset: 0, color: '#CC0000' },
                         { offset: 0.49, color: '#FF0000' },
                         { offset: 0.5, color: '#FF4747' },
                         { offset: 1, color: '#FF4747' }]
        };

        $(document).ready(function () {

            $.ajax({
                url: "ChartData2.xml",
                dataType: "xml",
                success: function (xml) {

                    initChart(xml);
                }
            });
        });

        function initChart(xml) {
            var data = [];

            $(xml).find('quantity').each(function () {

                var label = $(this).attr("Jahr");
                var value = $(this).attr("value");

                data.push([label, parseFloat(value)]);
            });

            $('#jqChart').jqChart({
                title: 'Patent / Jahr',
                border: { strokeStyle: '#6ba851' },
                background: background,
                animation: { duration: 1 },
                shadows: {
                    enabled: true
                },
                series: [
                    {
                        title: 'Anzahl',
                        type: 'column',
                        data: data,
                        fillStyle: fillStyle
                    }
                ]
            });
        }

    </script>
</head>
<body>
    <div>
        <div id="jqChart" style="width: 1024px; height: 300px;">
        </div>
		<a href="Stadt.htm" style="text-decoration: none; color: #333333; font-family: Arial, Helvetica, sans-serif">Nach Stadt</a>
		<h1>Xquery</h1>
		<pre><code>
for $hg in distinct-values(Model/Patent/Jahr)
return <jahr> { for $num in count(
     for $patente in Model/Patent
      where $patente/Jahr = $hg
      return <ort>
    </ort> 
 ) return 
 
 <quantity  Jahr="{data($hg)}" value="{data($num)}">
 </quantity> 
}  
</jahr>
		</code></pre>
		<hr>
		<h1>Javascript</h1>
		<pre><code>
		var background = {
            type: 'linearGradient',
            x0: 0,
            y0: 0,
            x1: 0,
            y1: 1,
            colorStops: [{ offset: 0, color: '#d2e6c9' },
                         { offset: 1, color: 'white' }]
        };

        var fillStyle = {
            type: 'linearGradient',
            x0: 0,
            y0: 0,
            x1: 1,
            y1: 0,
            colorStops: [{ offset: 0, color: '#CC0000' },
                         { offset: 0.49, color: '#FF0000' },
                         { offset: 0.5, color: '#FF4747' },
                         { offset: 1, color: '#FF4747' }]
        };

        $(document).ready(function () {

            $.ajax({
                url: "ChartData2.xml",
                dataType: "xml",
                success: function (xml) {

                    initChart(xml);
                }
            });
        });

        function initChart(xml) {
            var data = [];

            $(xml).find('quantity').each(function () {

                var label = $(this).attr("Jahr");
                var value = $(this).attr("value");

                data.push([label, parseFloat(value)]);
            });

            $('#jqChart').jqChart({
                title: 'Data From Xml File',
                border: { strokeStyle: '#6ba851' },
                background: background,
                animation: { duration: 1 },
                shadows: {
                    enabled: true
                },
                series: [
                    {
                        title: 'Anzahl',
                        type: 'column',
                        data: data,
                        fillStyle: fillStyle
                    }
                ]
            });
        }
		</code></pre>
    </div>
</body>
</html>
