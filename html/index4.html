<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta http-equiv="content-type" content="text/html; charset=utf-8"/>
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
		<title>Patentdokumente aus dem 19. Jahrhundert</title>
		<link href="css/bootstrap.min.css" rel="stylesheet" type="text/css">
		<link href="css/examples.css" rel="stylesheet" type="text/css"/>
		<link href="css/timeline-1.2.css" rel="stylesheet" type="text/css" />
		<link href="css/style.css" rel="stylesheet" type="text/css">
		
    <script src="js/timeline-1.2.js" type="text/javascript"></script>
    <style>
		div#timelinecontainer{ width: auto; height: calc(100vh - 101px); max-height:95vh }
		div#mapcontainer{ width: auto; height: calc(100vh - 101px); max-height:95vh }
		.imgpatent{width:125px ; height:150px; cursor:pointer}
		
		@font-face {
    font-family: altmodische;
    src: url(BLKCHCRY.TTF);
}
 #title{font-family: altmodische !important; margin-bottom:20px;text-decoration:underline}
 body{padding-right:30px}
    </style>

    <script type="text/javascript">
	function patentzeigen(id){
		var urlid = "rdfa/"+id;
				$.ajax({
					url:urlid,
					success:function(data) {
					  dritte(data); 
					}
				  });
		return false;
	}

	function dritte(data){
		var wo = document.getElementById('patentEinzelheiten');
		wo.className+=" neu"
		wo.innerHTML = data;
		document.getElementById('patentEinzelheiten').scrollIntoView();
		return false;
	}
	
		function oeffnefenster(url){
			fenster = window.open(url, "labw-0-0-0", "status=yes,scrollbars=yes,resiyable=yes");
			fenster.focus();
			return false;
		}
		
	</script>

	
	
    <link rel="stylesheet" type="text/css" href="Statistik/css/jquery.jqChart.css" />
    <link rel="stylesheet" type="text/css" href="Statistik/css/jquery.jqRangeSlider.css" />
    <link rel="stylesheet" type="text/css" href="Statistik/themes/smoothness/jquery-ui-1.10.4.css" />
			
	<script src="js/jquery-2.1.0.min.js" type="text/javascript"></script>
	<script src="js/bootstrap.min.js" type="text/javascript"></script>
	<script src="js/mxn.js?(googlev3)" type="text/javascript"></script>
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript" ></script>
	<script src="js/smoothscroll.js" type="text/javascript" ></script>

    <script src="Statistik/js/jquery-1.11.1.min.js" type="text/javascript"></script>
    <script src="Statistik/js/jquery.mousewheel.js" type="text/javascript"></script>
    <script src="Statistik/js/jquery.jqChart.min.js" type="text/javascript"></script>
    <script src="Statistik/js/jquery.jqRangeSlider.min.js" type="text/javascript"></script>
    <!--[if IE]><script lang="javascript" type="text/javascript" src="js/excanvas.js"></script><![endif]-->
    
    <script lang="javascript" type="text/javascript">
	

        var background = {
            type: 'linearGradient',
            x0: 0,
            y0: 0,
            x1: 0,
            y1: 1,
            colorStops: [{ offset: 0, color: '#d2e6c9' },
                         { offset: 1, color: 'white' }]
        };

        var fillStyle = {
            type: 'linearGradient',
            x0: 0,
            y0: 0,
            x1: 1,
            y1: 0,
            colorStops: [{ offset: 0, color: '#65c2e8' },
                         { offset: 0.49, color: '#55b3e1' },
                         { offset: 0.5, color: '#3ba6dc' },
                         { offset: 1, color: '#2794d4' }]
        };
		
        var fillStyle2 = {
            type: 'linearGradient',
            x0: 0,
            y0: 0,
            x1: 1,
            y1: 0,
            colorStops: [{ offset: 0, color: '#CC0000' },
                         { offset: 0.49, color: '#FF0000' },
                         { offset: 0.5, color: '#FF4747' },
                         { offset: 1, color: '#FF4747' }]
        };

        $(document).ready(function () {

            $.ajax({
                url: "Statistik/ChartData.xml",
                dataType: "xml",
                success: function (xml) {

                    initChart(xml);
                }
            });
			
			
            $.ajax({
                url: "Statistik/ChartData2.xml",
                dataType: "xml",
                success: function (xml) {

                    initChart2(xml);
                }
            });
			
        });

        function initChart(xml) {
            var data = [];

            $(xml).find('item').each(function () {

                var label = $(this).attr("Ort");
                var value = $(this).attr("value");

                data.push([label, parseFloat(value)]);
            });

            $('#jqChart').jqChart({
                title: 'Patent / Stadt',
                border: { strokeStyle: '#6ba851' },
                background: background,
                animation: { duration: 1 },
                shadows: {
                    enabled: true
                },
                series: [
                    {
                        title: 'Anzahl',
                        type: 'column',
                        data: data,
                        fillStyle: fillStyle
                    }
                ]
            });
        }
		
		
        function initChart2(xml) {
            var data = [];

            $(xml).find('quantity').each(function () {

                var label = $(this).attr("Jahr");
                var value = $(this).attr("value");

                data.push([label, parseFloat(value)]);
            });

            $('#jqChart2').jqChart({
                title: 'Patent / Jahr',
                border: { strokeStyle: '#6ba851' },
                background: background,
                animation: { duration: 1 },
                shadows: {
                    enabled: true
                },
                series: [
                    {
                        title: 'Anzahl',
                        type: 'column',
                        data: data,
                        fillStyle: fillStyle2
                    }
                ]
            });
        }

    </script>
	</head>	
	<body background="http://www.vatican.va/img/sfondo.jpg">
	
	
    <!-- Fixed navbar -->
    <nav class="navbar navbar-default navbar-fixed-top" style="height: 70px">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/" id="title">Patentdokumente aus dem 19. Jahrhundert</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav navbar-right">
            <li class="active"><a href="#startseite" id="rightmenu" class="smoothScroll">Startseite</a></li>
			<li><a href="#demo" id="rightmenu" class="smoothScroll">Demo</a></li>
			<li><a href="#ueber" id="rightmenu" class="smoothScroll">Über</a></li>
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false" id="rightmenu">Statistik<span class="caret"></span></a>
              <ul class="dropdown-menu" id="dropmenu">
                <!--li><a href="/Statistik/Jahr">Nach Jahren</a></li>
                <li><a href="/Statistik/Stadt">Nach St&auml;dten</a></li-->
				<li><a href="#jahren" class="smoothScroll">Nach Jahren</a></li>
                <li><a href="#staedten" class="smoothScroll">Nach St&auml;dten</a></li>
              </ul>
            </li>
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false" id="rightmenu">API<span class="caret"></span></a>
              <ul class="dropdown-menu" id="dropmenu">
                <li><a href="/rest">Model</a></li>
                <li role="separator" class="divider"></li>
                <li><a href="/rest/patente/html">Patente (html)</a></li>
                <li><a href="/rest/jahre/html">Jahre (html)</a></li>
                <li><a href="/rest/orte/html">Orte (html)</a></li>
                <li><a href="/rest/type/html">Type (html)</a></li>
                <li role="separator" class="divider"></li>
                <li><a href="/rest/patente/xml">Patente (xml)</a></li>
                <li><a href="/rest/jahre/xml">Jahre (xml)</a></li>
                <li><a href="/rest/orte/xml">Orte (xml)</a></li>
                <li><a href="/rest/type/xml">Type (xml)</a></li>
              </ul>
            </li>
			
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>
		
		<div class="container1">
			<a name="startseite"></a>
			<div class="jumbotron" id="jumbotron">
				<h1>Einleitung zur Benutzung der Webseite</h1>
				<br />
				<p>
				Die Zeitlinie ist in 1er- (obere Darstellung) und 10er-Jahresschritten (untere Darstellung) dargestellt. 
				Die Zeitlinie kann nach links oder nach rechts mit der Maus verschoben werden. 
				Die Patente, die in der unteren Darstellung im "hellgrauen Bereich" angezeigt werden, sind automatisch sichtbar auf Google Maps.
				</p>
				<p>	
				Das Patent kann entweder
					1) über die Zeitlinie angeklickt werden, die dann den ausgewählten Patent in Google Maps anzeigt oder
					2) direkt auf Google Maps (Marker) angeklickt werden.
				</p>
				<p>
				Durch Auswahl eines Patenten werden Informationen wie Ersteller, Jahr, Ort und eine Patentaufzeichnung angezeigt. 
				Durch Klicken auf "mehr Informationen" gelangt der Benutzer auf den unteren Bereich der Webseite und bekommt nähere Informationen über 
				das Patent (Beschreibung, Ort der Erstellung und Typ) sowie Informationen über den Ersteller (Name, Lebenslauf, Geburtsort und ein Bild).
				</p>
			<a name="demo"></a>
			</div>
			<div class="content">
				<div>
					<br/>
				</div>
				<div class="col-xs-6 col-sm-6 col-md-6">
					
					<div id="timelinecontainer" >
						<div id="timeline" ></div>
					</div>
					<br/>
				</div>
				<div class="col-xs-6 col-sm-6 col-md-6">
					
					<div id="mapcontainer">
						<div id="map"></div>
					</div>
					<br/>					
				</div>
				<br/>
				<div class="col-xs-12 col-sm-12 col-md-12">
				<div class="row">
					<div class="col-md-8 col-md-offset-2 patentkarte" id="patentEinzelheiten" >
						<!-- HERE COMES THE PATENT -->
					</div>
				</div>
				</div>
			</div>
			<script src="http://maps.google.com/maps/api/js?sensor=false" type="text/javascript" ></script>
			<script src="js/timemap.js" type="text/javascript"></script>
			<br /><a name="ueber">&nbsp;</a>
				<div class="jumbotron" id="jumbotron" >
					<h1>Projektaufgabe</h1>
					<br />				
					<p>
					Ziel dieses Projektes war es, die Daten aus dem Bestand E170a Württembergische Patentkommission der Zentralstelle 
					für Gewerbe und Handel zu entnommen. Die Metadaten sind in der Coding Da Vinci Webseite verfügbar unter
					https://offenedaten.de/dataset/patentkommission-der-zentralstelle-fur-gewerbe-und-handel/resource/1e9297ef-34b2-4cc6-8c15-f314fa65b284.
					</p>
					<a name="jahren"></a>
				</div>

				<div class="jumbotron" id="jumbotron">
				
					<h1>Statistik nach Jahren</h1>		
						<div id="jqChart2" style="width: 1024px; height: 300px; "></div>
					<a name="staedten"></a>
				</div>
				
				<div class="jumbotron" id="jumbotron">
				
					<h1>Statistik nach Städten</h1>			
						<div id="jqChart" style="width: 1024px; height: 300px; "></div>
						<a name="pageTop" href="#" style="position:fixed;bottom:0px;right:10px;"><img style="height:43px" src="images/pageTop.png"></a><br />
				</div>		

			<script type="text/javascript">
				var tm;
				$(function() {

					var second = function(dataJrL) {
						//console.log(dataJrL);
						// make a custom map style
						var styledMapType = new google.maps.StyledMapType([
							{
								featureType: "road.local",
								elementType: "labels",
								stylers: [
								  { saturation: 0 },
								  { lightness: 0 }
								]
							}
						]);
						
						tm = TimeMap.init({
							mapId: "map",               // mapID für das div-element
							timelineId: "timeline",     // timelineId für das div-element
							datasets: [
								{
									type: "basic",
									options: {
										items: dataJrL
									}
								}
							],
							bandIntervals: [
								Timeline.DateTime.YEAR, 
								Timeline.DateTime.DECADE
							]
						});
							if (location.hash){
								patentzeigen(location.hash.substring(1));
							}

					};
					$.ajax({
						url:"xslt.html",
						success:function(data) {
						  second(JSON.parse(data.replace(/"/g, "\\\"").replace(/'/g, "\""))); 
						}
					  });
				});
			</script>
		</div>
	</body>
</html>	